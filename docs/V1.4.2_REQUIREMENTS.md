# yowu-devtools v1.4.2 SRS (Software Requirements Specification)

## API Response Diff Tool 통합

---

## 문서 메타

- **프로젝트명**: tools.yowu.dev (yowu-devtools)
- **버전**: v1.4.2
- **기능명**: API Response Diff Tool 통합
- **작성일**: 2025-12-17
- **상태**: 🚧 구현 진행 중 (UI 완료)

---

## 0. 배경 및 목표

### 0.1 배경

개발자들이 **두 개의 도메인(A/B)에 대해 동일한 API 요청을 보내고 응답을 비교**해야 하는 경우가 많습니다. 예를 들어:

- **Stage vs Production 환경 비교**: 동일한 API를 Stage와 Production에서 호출하여 응답 차이 확인
- **API 버전 비교**: v1과 v2 API의 응답 차이 확인
- **마이그레이션 검증**: 기존 API와 새 API의 응답 일치 여부 확인
- **A/B 테스트**: 두 서버의 응답 동일성 검증

### 0.2 v1.4.2 목표

1. **신규 Tool: API Response Diff 추가**

   - 두 도메인(A/B)에 동일한 요청을 동시에 전송
   - JSON 응답 비교 및 차이점 시각화
   - API Tester와 동일한 Chrome Extension 기반 CORS 우회 지원

2. **프로젝트 구조 통합**

   - tools.yowu.dev의 표준 도구 구조에 맞춰 통합
   - useToolState 훅 사용으로 상태 관리 표준화
   - i18n 지원 (en-US, ko-KR, ja-JP, zh-CN, es-ES)

3. **사용자 경험 개선**
   - 직관적인 A/B 비교 UI
   - 상이한 필드만 테이블로 표시
   - 히스토리 관리 및 URL 공유 기능

---

## 1. 범위

### 1.1 In Scope

- ✨ **신규 Tool: API Response Diff**

  - HTTP 메서드: GET, POST, PUT, PATCH, DELETE
  - 두 도메인(A/B)에 동일한 요청 동시 전송
  - JSON 응답 비교 (상태코드 + Body)
  - 상이한 필드 테이블 표시
  - 응답 JSON Viewer (react-json-tree)
  - cURL 명령어 생성 및 복사

- 🔧 **API Tester 연동**

  - Chrome Extension 기반 CORS 우회 지원
  - API Tester와 동일한 요청 실행 로직 재사용
  - Extension 상태 표시 및 권한 관리

- 📊 **비교 기능**

  - 상태코드 비교
  - JSON Body 깊은 동등성 비교 (키 순서 무시)
  - 상이한 필드 경로 및 값 추출
  - 응답 메타 정보 표시 (Status, Elapsed, Size)

- 💾 **히스토리 및 공유**
  - 최근 30개 실행 히스토리 저장
  - URL 공유 기능 (share 파라미터)
  - 히스토리 항목 로드 및 삭제

### 1.2 Out of Scope (v1.4.2 제외)

- ❌ 응답 헤더 비교
- ❌ 멀티 스텝 시나리오/테스트 시퀀스
- ❌ 파일 업로드/다운로드, form-data/x-www-form-urlencoded
- ❌ 느슨한 비교 옵션 (숫자/문자열 동치)
- ❌ 무시 필드 목록 (JSONPath) 지정
- ❌ 응답 시간차 통계/부하 테스트

---

## 2. 라우팅 및 네비게이션

### 2.1 신규 페이지

- **경로**: `/api-diff` (또는 `/api/diff` 중 선택)
  - 기존 API Tester(`/api`)와 유사한 카테고리로 묶기 쉬운 경로 권장
  - i18n 지원: `/{locale}/api-diff` (예: `/ko-KR/api-diff`)

### 2.2 사이드바

- "API Response Diff" 항목 추가
- API Tester 근처에 배치하여 관련 도구로 그룹화
- 아이콘: `GitCompare` 또는 `SplitSquareHorizontal` (lucide-react)

### 2.3 SEO 최적화

- `vite-plugin-generate-routes.ts`에 도구 정보 추가
- 메타 태그: title, description, keywords
- sitemap.xml에 경로 추가

---

## 3. UI/UX 요구사항

### 3.1 레이아웃 구조

- **레이아웃 변경 (v1.4.2 업데이트)**:

  - **상단 C영역**: 공통 입력 영역
    1. Domain A / Domain B 입력 (가로 2열)
    2. Method + Path 입력 + Execute 버튼
    3. Parameters / Headers (가로 2열)
    4. Body (JSON) - CodeMirror 에디터 사용
  - **하단 A/B영역**: 응답 패널 (가로 2열)
    - 좌측 A: Response A 패널
    - 우측 B: Response B 패널

- **ToolHeader 사용**: 다른 도구와 동일한 스타일의 헤더 (Reset, Share 버튼 포함)

- **전체 스크롤**: 모든 영역이 하나의 프레임에서 함께 스크롤

- **화면 너비**: Wide Group (max-w-[90rem]) 사용 - 좌우 분할 뷰에 최적화

### 3.2 C영역 상세

- **Domain A/B 입력 (상단)**

  - 가로 2열 배치 (반응형: 모바일에서 세로)
  - 각 도메인 입력 옆에 **Preset 버튼** (리스트 아이콘)
  - **Domain Preset 기능** (모달):
    - 저장된 도메인 목록에서 선택
    - 새 프리셋 추가 (제목 + 도메인)
    - 프리셋 삭제 (개별/전체)
    - Export (JSON 파일로 내보내기)
    - Import (JSON 파일 가져오기 - 기존 설정 덮어씀)
    - localStorage에 저장 (`yowu-devtools:v1:api-diff:domain-presets`)

- **HTTP Method Select**: GET/POST/PUT/PATCH/DELETE
- **Path Input**: 문자열(`/`로 시작 권장), 비어있으면 실행 불가
  - Path에 쿼리스트링이 포함된 경우 자동으로 파싱되어 Parameters에 추가
  - 입력 필드에서 포커스가 벗어나거나 Enter 키를 누르면 파싱 수행
- **Execute 버튼**: Path 입력 옆에 배치 (키보드 단축키: Ctrl/Cmd+Enter)

- **Parameters Editor**: 키-값 반복 추가/삭제, 자동 URL 인코딩
  - Parameters는 왼쪽에, Headers는 오른쪽에 배치
  - 스크롤 없이 모든 항목 표시
- **Headers Editor**: 키-값 반복 추가/삭제, 공통 헤더로 A/B 모두 동일 적용

  - Parameters는 왼쪽에, Headers는 오른쪽에 배치
  - 스크롤 없이 모든 항목 표시

- **Body Editor (JSON)**: GET 메서드에서는 **숨김**, 그 외 메서드에서만 표시

  - **CodeMirror 에디터 사용** (구문 강조, 라인 넘버)
  - JSON 모드 활성화 (`@codemirror/lang-json`)
  - 다크 모드 지원 (자동 테마 전환)
  - 기본 높이 150px

- **공유**: ToolHeader의 Share 버튼 사용

  - 공유 버튼 클릭 시 현재 입력값 기준으로 share URL 생성 및 클립보드 복사
  - 복사 성공 시 버튼 아이콘이 Check 아이콘으로 변경되고 "복사됨" 텍스트 표시
  - API 호출 없이도 설정을 공유할 수 있음

- **History**: 최근 실행 구성 최대 30개 저장 (자동 저장: 실행 시)
  - 드롭다운으로 과거 항목 로드
  - 중복 구성은 최신 1개만 보존 (share 값 기반 비교)
  - 개별 삭제 지원
  - 히스토리는 share querystring(base64) 형식으로 저장됨

### 3.3 A/B영역 상세 (응답 패널)

- **도메인 입력은 C영역으로 이동됨**
- **패널 헤더**: "Response A" / "Response B" 제목 + 도메인 표시
- **Response Panel** (각 영역 동일):
  - 상단 메타: **Status**, **Elapsed(ms)**, **Size(bytes)**
  - 탭: **Body(JSON Viewer)** / **Headers(표)** / **Raw(Text)** / **cURL**
  - 액션: **Copy** (cURL 탭 활성화 시 cURL 명령어 복사, 그 외 탭에서는 응답 JSON 복사. 복사 시 아이콘이 Check 아이콘으로 변경되고 "클립보드에 복사되었습니다" 팝업 표시, 2초 후 자동 사라짐), **Download JSON**
  - **Body 탭**: `react-json-tree` 라이브러리 사용, 밝은 테마(`invertTheme={true}`), 모든 노드가 기본적으로 펼쳐짐(`shouldExpandNodeInitially={() => true}`)
    - 응답이 상이한 경우, 실제로 다른 필드만 하이라이팅됩니다
    - 값이 다른 경우: 노란색 배경(`#fef3c7`, yellow-100)으로 표시
    - 필드가 없는 경우 (한쪽에만 존재): 빨간색 배경(`#fee2e2`, red-100)으로 표시
    - 부모 객체는 하이라이팅되지 않으며, 실제로 다른 필드만 강조됩니다
  - **cURL 탭**: 현재 요청을 재현하는 cURL 명령어 표시

### 3.4 ToolHeader (하단 플로팅 바 제거)

- **하단 플로팅 바 제거됨** - 다른 도구들과 동일한 UI 패턴 적용
- **ToolHeader 사용**:
  - 제목 및 설명 표시
  - Reset 버튼: 현재 화면의 모든 입력/응답 초기화 (History는 보존)
  - Share 버튼: 현재 설정을 URL로 공유
- **Execute 버튼**: C영역의 Path 입력 옆에 배치
  - 단축키 `Ctrl/Cmd+Enter`
  - 실행 중이면 "Cancel" 버튼으로 변경 (빨간색)

### 3.5 결과 배너 & Diff

- **비교 기준**: (1) 상태코드 동일 && (2) JSON Body 깊은 동등성 (키 순서 무시, 타입/값 엄격)
- **동일**: 초록 Success 배너 "응답이 동일합니다". 이 경우에도 A/B 영역에는 JSON 응답이 표시됨
- **상이**: 노랑 Warning 배너 + **상이한 필드 테이블**
  - 상태코드가 다르면 "Status: A=200, B=404" 라벨 병기
  - Body Diff: 상이한 필드만 테이블로 표시 (필드 경로, A 값, B 값)
  - 테이블은 스크롤 가능하며, 헤더는 sticky로 고정
  - 테이블 하단의 드래그 핸들로 높이를 조절할 수 있습니다 (최소 100px, 최대 600px, 기본값 230px)
  - 설정한 높이는 localStorage에 저장되어 페이지 새로고침 후에도 유지됩니다
  - 상세한 전체 JSON 비교는 A/B 영역의 Body 탭에서 확인 가능

---

## 4. 기능 요구사항

### 4.1 요청 URL 구성

- A요청 = `domainA` + `path` + `?queryString`
- B요청 = `domainB` + `path` + `?queryString`
- `queryString`은 Parameters Editor 값들을 URL 인코딩하여 조합

### 4.2 요청 전송 규칙

- **Chrome Extension 사용**: API Tester와 동일한 방식으로 Extension을 통해 요청 전송
  - Extension이 연결되어 있으면 자동으로 Extension 모드 사용
  - Extension이 없거나 권한이 없으면 Direct 모드 사용 (CORS 제한 가능)
- **타임아웃**: 10,000ms (AbortController)
- **Body 전송**: 메서드가 GET이 아니고, Body 입력이 있을 때 `Content-Type: application/json` 헤더 자동 부착
- **Headers**: C영역에서 입력한 공통 헤더를 A/B 요청 모두에 동일 적용 (키 중복 시 마지막 값 우선)
- **병렬 실행**: A/B 동시 호출. 이전 실행이 진행 중일 경우, 재실행 시 기존 요청 취소

### 4.3 응답 처리

- 응답 본문은 우선 문자열로 확보 후 **JSON 파싱 시도**
  - 성공 시 JSON Viewer에 pretty-print (`react-json-tree` 사용)
  - 실패 시 Non-JSON 경고 + Raw 탭에서 원문 표시
- 응답 메타(상태/지연/크기/헤더) 수집 및 표시
- **응답이 동일하거나 상이한 경우 모두 A/B 영역에 JSON 응답 표시**

### 4.4 비교 로직

- **상태코드** 비교: A.status === B.status
- **JSON Body** 비교:
  - 두 응답 모두 JSON 파싱 성공 시에만 비교. 하나라도 실패 → "Body 비교 불가" 상태로 간주(자동 **상이** 처리)
  - **깊은 동등성**: 객체 키 순서 무시, 배열은 **순서 포함** 비교, 타입 엄격
  - 결과가 완전 동일 → Success, 아니면 Warning + 상이한 필드 테이블
- **상이한 필드 추출**: `findDifferentFields` 유틸리티를 사용하여 상이한 필드의 경로와 값을 추출하여 테이블로 표시

### 4.5 히스토리 저장 정책

- 저장 시점: **실행 완료 직후**(성공/실패 불문)
- 보관 개수: 최대 **30개**, 초과 시 **가장 오래된 항목 제거(FIFO)**
- 저장 형식: **share querystring(base64)** 형식으로 저장 (`encodeShare` 함수 사용)
- 중복 판단: share 값 기반 비교 (동일한 share 값이 있으면 제거)
- **민감 헤더(예: Authorization)** 는 기본적으로 **저장 제외** 권장 (UI 토글로 저장 허용 가능)

### 4.6 Copy 기능

- **Copy (cURL 탭)**: cURL 탭이 활성화된 경우, 현재 구성값으로 요청을 재현하는 cURL 문자열을 클립보드에 복사
- **Copy (그 외 탭)**: JSON 응답을 클립보드에 복사. 복사 성공 시:
  - Copy 아이콘이 Check 아이콘으로 변경 (2초 후 원래대로 복귀)
  - "클립보드에 복사되었습니다" 팝업이 표시되고 2초 후 자동 사라짐 (fade-in 애니메이션 적용)

---

## 5. 데이터 모델

### 5.1 타입 정의

```typescript
export type HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';

export type TestCommon = {
  method: HttpMethod;
  path: string; // '/v1/items'
  params: Record<string, string>; // { q: 'pen', page: '1' }
  headers: Record<string, string>; // 공통 헤더
  body?: string; // JSON string (GET일 때 무시)
  timeoutMs: number; // 10000 (고정)
};

export type TestConfig = {
  common: TestCommon;
  domainA: string;
  domainB: string;
};

export type ResponseSide = {
  ok: boolean;
  status: number | null; // 네트워크/CORS 시 null 가능
  elapsedMs: number | null;
  sizeBytes: number | null;
  headers: Record<string, string>;
  rawBody: string | null; // 원문
  parsedJson?: unknown; // JSON parse 성공 시
  error?: string; // 에러 메시지
};

export type HistoryItem = {
  id: string; // uuid
  ts: number; // epoch millis
  name: string; // 예) "GET /v1/items?q=pen"
  share: string; // base64 인코딩된 TestConfig (share querystring 값)
};

export type HistoryStore = {
  version: 1 | 2; // v1: config 기반, v2: share 기반 저장 방식
  items: HistoryItem[]; // 최대 30개
};

export type DifferentField = {
  path: string; // 필드 경로 (예: "user.name", "items[0].id")
  valueA: unknown; // A 측 값
  valueB: unknown; // B 측 값
};

// Domain Preset (v1.4.2 추가)
export type DomainPreset = {
  id: string;
  title: string; // 예) "Production", "Stage"
  domain: string; // 예) "https://api.example.com"
};

export type DomainPresetsStore = {
  version: 1;
  presets: DomainPreset[];
};
```

### 5.2 LocalStorage 키

- `yowu-devtools:v1:api-diff:state` (도구 상태)
- `yowu-devtools:v1:api-diff:history` (히스토리)
- `yowu-devtools:v1:api-diff:diffTableHeight` (Diff 테이블 높이 설정)
- `yowu-devtools:v1:api-diff:domain-presets` (도메인 프리셋)

---

## 6. 기술 스택 및 구조

### 6.1 기술 스택

- **React 19 + TypeScript**: 기존 프로젝트와 동일
- **useToolState 훅**: 도구 상태 관리 표준화
- **react-json-tree**: JSON Viewer (기존 simple-e2e-test와 동일)
- **lucide-react**: 아이콘
- **Tailwind CSS**: 스타일링
- **Chrome Extension**: API Tester와 동일한 Extension 사용

### 6.2 컴포넌트 구조

```
src/tools/api-diff/
├── index.tsx              # 메인 컴포넌트 및 도구 정의
├── types.ts               # 타입 정의
├── constants.ts           # 상수 정의
├── components/
│   ├── index.ts           # 컴포넌트 인덱스
│   ├── TopSharedPanel.tsx # C영역 컴포넌트 (Domain, Method, Path, Params, Headers, Body)
│   ├── SidePanel.tsx      # A/B 영역 컴포넌트 (응답 패널)
│   ├── ResultBanner.tsx   # 결과 배너 및 Diff 테이블
│   ├── KeyValueEditor.tsx # Parameters/Headers 에디터
│   └── DomainPresetModal.tsx  # 도메인 프리셋 모달
├── hooks/
│   ├── index.ts           # 훅 인덱스
│   └── useDomainPresets.ts    # 도메인 프리셋 관리 훅
└── utils/
    ├── index.ts           # 유틸리티 인덱스
    ├── comparison.ts      # 비교 유틸리티 (deepEqualIgnoringKeyOrder, findDifferentFields)
    └── url.ts             # URL 빌드 및 cURL 생성
```

### 6.3 API Tester 연동

- **useRequestExecutor 훅 재사용**: API Tester의 `useRequestExecutor` 훅을 재사용하여 Extension 기반 요청 실행
- **useExtension 훅 재사용**: Extension 상태 확인 및 권한 관리
- **RequestSpec 타입 재사용**: `@yowu-devtools/shared` 패키지의 타입 사용

---

## 7. 비교 알고리즘 상세

1. **상태코드 비교**: `sameStatus = a.status === b.status`

2. **JSON Body 비교**

   - `bothJson = a.parsedJson !== undefined && b.parsedJson !== undefined`
   - `sameBody = deepEqualIgnoringKeyOrder(a.parsedJson, b.parsedJson)`

3. **최종 동일 판정**: `sameStatus && sameBody`

4. **상이한 필드 추출**: `findDifferentFields(a.parsedJson, b.parsedJson)` 함수를 사용하여 재귀적으로 상이한 필드를 찾아 경로와 값을 반환

> deepEqualIgnoringKeyOrder 규칙: 객체의 키는 정렬 후 비교, 배열은 **순서까지 동일**해야 함, 타입 일치 필수.

---

## 8. 에러 처리

### 8.1 유효성 검사

- Domain: `https?://`로 시작, 공백 불가
- Path: 비어있지 않아야 하며 `/`로 시작 권장
- Parameters/Headers: 키는 필수, 공백 키는 입력 가능하나 저장 시 자동 제거됨
- Body: JSON 유효성 검사는 수행하지 않음 — 입력한 원문 그대로 전송됨

### 8.2 오류 처리

- **CORS 에러**: Extension이 연결되어 있으면 자동으로 Extension 모드 사용, 없으면 Direct 모드에서 CORS 에러 표시
- **Mixed Content 에러**: HTTPS 페이지에서 HTTP API 호출 시 결과 배너에 안내 메시지 표시
- **타임아웃**: "요청이 10초 내 응답하지 않아 취소했습니다."
- **JSON 파싱 실패**: "응답이 JSON 형식이 아닙니다(비교 불가). Raw 탭에서 원문을 확인하세요."

---

## 9. i18n 지원

### 9.1 지원 언어

- en-US (기본)
- ko-KR
- ja-JP
- zh-CN
- es-ES

### 9.2 번역 키 네임스페이스

- `tool.apiDiff.*`: 도구별 문자열
- `meta.apiDiff.*`: SEO 메타 정보

### 9.3 주요 번역 키

```typescript
tool.apiDiff: {
  title: 'API Response Diff',
  description: 'Compare API responses from two domains',
  domainA: 'Domain A',
  domainB: 'Domain B',
  execute: 'Execute',
  cancel: 'Cancel',
  reset: 'Reset',
  response: 'Response',
  parameters: 'Parameters',
  headers: 'Headers',
  body: 'Body (JSON)',
  noResponseYet: 'No response yet',
  notValidJson: 'Response is not valid JSON...',
  responsesIdentical: 'Responses are identical',
  responsesDifferent: 'Responses are different',
  path: 'Path',
  valueA: 'Value A',
  valueB: 'Value B',
  preset: {
    title: 'Domain Presets',
    select: 'Select from presets',
    addNew: 'Add New Preset',
    titlePlaceholder: 'Title (e.g., Production)',
    domainPlaceholder: 'https://api.example.com',
    add: 'Add',
    savedPresets: 'Saved Presets',
    noPresets: 'No presets saved yet',
    remove: 'Remove',
    clearAll: 'Clear All',
    confirmClear: 'Click again to confirm',
    export: 'Export',
    import: 'Import',
    added: 'Preset added',
    removed: 'Preset removed',
    clearedAll: 'All presets cleared',
    selected: 'Domain selected',
    fillBothFields: 'Please fill both title and domain',
    importSuccess: 'Imported {{count}} presets',
    importFailed: 'Failed to import presets',
  },
}
```

---

## 10. SEO 최적화

### 10.1 메타 태그

- **Title**: "API Response Diff - Compare API Responses | tools.yowu.dev"
- **Description**: "Free online API response comparison tool. Compare JSON responses from two domains side-by-side. All processing happens in your browser."
- **Keywords**: `['api diff', 'api comparison', 'json diff', 'api tester', 'response comparison', 'api testing', 'json comparison tool']`

### 10.2 Sitemap

- `/api-diff` 경로 추가
- Priority: 1.0 (개별 도구 페이지)

---

## 11. 테스트 케이스

1. **동일 응답**: 상태 200, Body 동일(키 순서만 다름) → Success 배너, A/B 영역에 JSON 응답 표시
2. **상태 상이**: Body 동일, 상태 A=200 / B=404 → Warning + Status 차이 표기, A/B 영역에 JSON 응답 표시
3. **Body 상이**: 필드 값/타입 변화 → Warning + 상이한 필드 테이블, A/B 영역에 JSON 응답 표시
4. **Non-JSON 응답**: 한 쪽이 HTML → 비교 불가 안내 + Raw 탭 노출
5. **타임아웃**: 10초 초과 → TIMEOUT 표시, 취소 동작 검증
6. **History**: 31번째 저장 시 첫 항목 제거, 중복 저장 시 최신 1개 유지
7. **Copy as cURL/Response Copy**: 정상 복사 확인, 아이콘 변경 및 팝업 표시 확인
8. **Body 입력 필드**: GET 메서드 선택 시 숨김, POST/PUT/PATCH/DELETE 선택 시 표시
9. **전체 스크롤**: A/B/C 영역이 하나의 프레임에서 함께 스크롤되는지 확인
10. **화면 너비**: container를 사용하여 가독성 좋은 범위 내에서만 렌더링되는지 확인
11. **Extension 모드**: Extension이 연결되어 있으면 자동으로 Extension 모드 사용 확인
12. **Direct 모드**: Extension이 없으면 Direct 모드 사용 및 CORS 에러 처리 확인

---

## 12. 수용 기준 (Acceptance Criteria)

- C영역에서 설정한 Path/Params/Body/Headers가 A/B에 **동일** 적용되어 호출된다.
- A/B 도메인은 각각 별도 입력 가능하며, **동시에 호출**된다.
- 응답 비교는 **상태코드 + JSON Body** 기준으로 수행되며, **키 순서는 무시**, 타입/값은 **엄격 일치**한다.
- 동일 시 **Success 배너**, 상이 시 **Warning + 상이한 필드 테이블**이 나타난다.
- **응답이 동일하거나 상이한 경우 모두 A/B 영역에 JSON 응답이 표시된다.**
- 히스토리는 **최대 30개** 저장/로드 가능하며, 중복 방지/삭제 기능을 제공한다.
- **cURL 탭**에서 cURL 명령어를 확인하고 복사할 수 있으며, **응답 JSON Copy**가 동작하며, 복사 시 아이콘 변경 및 팝업이 표시된다.
- 타임아웃은 10초이며, 리트라이는 수행하지 않는다.
- **Body 입력 필드는 GET 메서드에서 숨김**, 그 외 메서드에서만 표시된다.
- **A/B/C 영역이 모두 하나의 프레임에서 함께 스크롤**된다.
- **화면 너비는 container를 사용하여 가독성 좋은 범위 내에서만 렌더링**된다.
- **C 영역의 높이는 전체 화면의 약 20% 수준**으로 축소되었다.
- **플로팅 바가 콘텐츠를 가리지 않도록 하단 여유 공간이 추가**되었다.
- **Chrome Extension이 연결되어 있으면 자동으로 Extension 모드를 사용**한다.
- **Extension이 없거나 권한이 없으면 Direct 모드를 사용**한다.
- tools.yowu.dev에서 정상 구동된다.

---

## 13. 구현 우선순위

### Phase 1: 기본 구조 및 UI ✅ 완료

1. ✅ 도구 디렉토리 구조 생성
2. ✅ 타입 정의 및 상수
3. ✅ 기본 레이아웃 컴포넌트 (TopSharedPanel, SidePanel, ResultBanner)
4. ✅ useToolState 훅 통합
5. ✅ ToolHeader 적용 (FloatingBar 제거)

### Phase 1.5: UI 개선 ✅ 완료

1. ✅ Domain A/B 입력을 Path 상단으로 이동
2. ✅ Body 에디터를 CodeMirror로 변경
3. ✅ Domain Preset 기능 추가 (DomainPresetModal)
4. ✅ useDomainPresets 훅 생성
5. ✅ i18n 키 추가 (preset 관련)

### Phase 2: 요청 실행 및 응답 처리 🚧 진행 중

1. ⬜ useRequestExecutor 훅 통합 (API Tester 재사용)
2. ⬜ Extension 모드 지원
3. ⬜ 응답 파싱 및 메타 정보 수집
4. ⬜ JSON Viewer 통합 (react-json-tree)

### Phase 3: 비교 로직

1. ✅ deepEqualIgnoringKeyOrder 함수 구현
2. ✅ findDifferentFields 함수 구현
3. ⬜ 비교 결과 배너 표시 (실제 응답 연동)
4. ⬜ 상이한 필드 테이블 구현 (실제 응답 연동)

### Phase 4: 히스토리 및 공유

1. ⬜ 히스토리 저장/로드 기능
2. ⬜ URL 공유 기능 (encodeShare, decodeShare)
3. ⬜ 히스토리 UI 구현

### Phase 5: 추가 기능 및 최적화

1. ✅ Copy 기능 (cURL, JSON)
2. ✅ Download JSON 기능
3. ⬜ Diff 테이블 높이 조절 기능
4. ⬜ 에러 처리 및 사용자 피드백

### Phase 6: i18n 및 SEO ✅ 완료

1. ✅ i18n 리소스 추가 (en-US, ko-KR, ja-JP, zh-CN, es-ES)
2. ✅ SEO 최적화 (vite-plugin-generate-routes.ts)
3. ✅ 빌드 검증

---

## 14. 참고 자료

- **API Tester 구현**: `apps/web/src/tools/api-tester/`
- **useExtension 훅**: `apps/web/src/tools/api-tester/hooks/useExtension.ts`
- **useRequestExecutor 훅**: `apps/web/src/tools/api-tester/hooks/useRequestExecutor.ts`
- **@yowu-devtools/shared**: 공유 타입 및 유틸리티

---

## 15. 변경 이력

- **v1.4.2 (2025-12-17)**: 초기 요구사항 정의
- **v1.4.2 (2025-12-17) UI 업데이트**:
  - Domain A/B 입력을 Path 상단으로 이동
  - Body 에디터를 CodeMirror로 변경 (구문 강조, 다크 모드 지원)
  - Domain Preset 기능 추가 (저장/불러오기/Export/Import)
  - FloatingBar 제거, ToolHeader 적용
  - i18n 키 추가 (preset 관련)
